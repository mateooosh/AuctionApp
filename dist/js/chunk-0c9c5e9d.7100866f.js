(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c9c5e9d"],{3215:function(e,t,a){},"44f3":function(e,t,a){"use strict";a("3215")},ea9a:function(e,t,a){"use strict";a.r(t);var o=a("7a23"),n={class:"zaloguj"};function s(e,t,a,s,i,r){var l=Object(o["y"])("Navbar"),c=Object(o["y"])("Zaloguj"),d=Object(o["y"])("Footer");return Object(o["q"])(),Object(o["d"])("div",n,[Object(o["h"])(l),Object(o["h"])(c),Object(o["h"])(d)])}var i=a("d178"),r=Object(o["I"])("data-v-68b83dea");Object(o["t"])("data-v-68b83dea");var l={class:"login"},c=Object(o["h"])("h1",null,"Zaloguj się",-1),d=Object(o["g"])("Adres e-mail"),u=Object(o["h"])("span",{style:{color:"red"}},"*",-1),p=Object(o["g"])("Hasło"),b=Object(o["h"])("span",{style:{color:"red"}},"*",-1),g={key:0,class:"fas fa-spinner fa-spin fa-lg"},j={key:1},h={class:"login__register"},m=Object(o["g"])("Nie masz konta na wdmj.pl? "),O=Object(o["h"])("span",{style:{"font-weight":"600"}},"Zarejestruj się",-1);Object(o["r"])();var f=r((function(e,t,a,n,s,i){var f=Object(o["y"])("router-link");return Object(o["q"])(),Object(o["d"])("div",l,[c,Object(o["h"])("form",{onSubmit:t[4]||(t[4]=Object(o["H"])((function(){}),["prevent"])),class:"login__email"},[Object(o["h"])("label",{class:[{"wrong-email":!s.isCorrectEmail},"login__email__label"],for:"email"},[d,u],2),Object(o["F"])(Object(o["h"])("input",{onKeyup:t[1]||(t[1]=Object(o["G"])((function(){return i.logIn.apply(i,arguments)}),["enter"])),onChange:t[2]||(t[2]=function(){return i.validateEmail.apply(i,arguments)}),"onUpdate:modelValue":t[3]||(t[3]=function(e){return s.email=e}),class:"login__email__input",name:"email",type:"text",placeholder:"Adres e-mail"},null,544),[[o["D"],s.email]])],32),Object(o["h"])("form",{onSubmit:t[8]||(t[8]=Object(o["H"])((function(){}),["prevent"])),class:"login__password"},[Object(o["h"])("label",{class:[{"wrong-password":!s.isCorrectPassword},"login__password__label"],for:"password"},[p,b],2),Object(o["F"])(Object(o["h"])("input",{onKeyup:t[5]||(t[5]=Object(o["G"])((function(){return i.logIn.apply(i,arguments)}),["enter"])),onChange:t[6]||(t[6]=function(){return i.validatePassword.apply(i,arguments)}),"onUpdate:modelValue":t[7]||(t[7]=function(e){return s.password=e}),class:"login__password__input",name:"password",type:"password",placeholder:"Hasło",autocomplete:"on"},null,544),[[o["D"],s.password]])],32),Object(o["h"])("button",{onClick:t[9]||(t[9]=function(){return i.logIn.apply(i,arguments)}),class:"login__btn"},[s.loading?(Object(o["q"])(),Object(o["d"])("i",g)):Object(o["e"])("",!0),s.loading?Object(o["e"])("",!0):(Object(o["q"])(),Object(o["d"])("span",j,"Zaloguj się"))]),Object(o["h"])("p",h,[m,Object(o["h"])(f,{to:"/rejestracja"},{default:r((function(){return[O]})),_:1})])])})),w=(a("d3b7"),a("5502")),_={name:"Zaloguj",data:function(){return{email:"",password:"",isCorrectEmail:!0,isCorrectPassword:!0,didInputChanged:!1,loading:!1}},store:w["a"],methods:{onSubmit:function(){},logIn:function(){var e=this;if(this.isCorrectEmail&&this.isCorrectPassword&&this.didInputChanged){this.loading=!0;var t={email:this.email,password:this.password},a="http://localhost:8080/api/auth/signin";fetch(a,{method:"POST",body:JSON.stringify(t)}).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(t){e.loading=!1,console.log("Sukces. Odebrane dane ",t),e.$store.commit("logged",!0),e.$store.commit("userId",t.userId),e.$store.commit("userEmail",t.email),e.$store.commit("role",t.roles[0]),"ROLE_USER"===t.roles[0]?alert("Udało się zalogować!"):"ROLE_ADMIN"===t.roles[0]&&alert("Udało się zalogować jako admin!"),e.$router.push("/")})).catch((function(t){e.loading=!1,console.log("Błąd",t),alert("Nie udało się zalogować!")}))}else alert("Dane nie przeszły walidacji!")},getLogged:function(){return this.$store.state.logged},validateEmail:function(){this.didInputChanged=!0;var e=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.isCorrectEmail=e.test(this.email)},validatePassword:function(){this.didInputChanged=!0;var e=/^.{6,}$/;this.isCorrectPassword=e.test(this.password)}}};a("44f3");_.render=f,_.__scopeId="data-v-68b83dea";var v=_,y=a("fd2d"),C={name:"Logowanie",components:{Navbar:i["a"],Zaloguj:v,Footer:y["a"]},mounted:function(){this.$store.state.logged?this.$router.push("/"):(document.title="Logowanie - wdmj.pl",window.scrollTo(0,0))}};C.render=s;t["default"]=C}}]);
//# sourceMappingURL=chunk-0c9c5e9d.7100866f.js.map